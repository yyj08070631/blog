# 001 HTTP 状态码

::: tip Source
[日问-山月](https://q.shanyue.tech/base/http/)
:::

## HTTP 常见的状态码有哪些

### 1xx：表示消息

### 2xx：表示成功

**200 OK** 表示请求成功，并返回了请求的资源

**206 Partial Content** 通过 `Range` 请求头、`Content-Range` 响应头控制的分片传输，一般在大文件下载的时候会触发

### 3xx：表示重定向

**301 Moved Permanently** 永久重定向，意味着客户端会对重定向结果进行缓存；搜索引擎会认为原地址已经永久失效，将 [PR 网站等级](https://baike.baidu.com/item/PR/6341) 继承到新站点；浏览器会缓存重定向的结果，不需要再访问原站点

**302 Found** 临时重定向，访问旧站点的时候不会对重定向进行缓存，必须请求旧站点，旧站点返回 302，再跳转新站点

**304 Not Modified** 意味着资源最近并未发生修改，返回协商缓存的结果

### 4xx：表示客户端错误

**400 Bad Request** 表示客户端发送了一个错误的请求，但不明确错误的原因，[RFC 7231](https://tools.ietf.org/html/rfc7231#section-6.5.1)中举的例子是：格式错误的请求语法、无效的消息帧、欺骗性的请求路由

**401 Unauthorized**

缺乏身份验证信息，比如缺少验证 token 等

**403 Forbidden**

说明请求被服务器拒绝了，拒绝的原因一般会在请求主体中另外说明

**404 Not Found**

著名的 404 Not Found，表示服务器无法找到请求的 URL，包括静态资源、接口等

### 5xx：表示服务端错误

**500 Internal Server Error**

表示服务端出错了，500 是一个“万能”的状态码，无法具体的表示某种错误，因此遇到这种情况时，服务端应该把它归类为更具体的类型

**502 Bad Gateway**

表示作为网关或代理角色的服务器，从上游服务器中接收到的响应是无效的

**503 Service Unavailable**

表示服务端暂时不可用，如果服务器知道什么时候能够恢复，可以在响应头中声明 `Retry-After` 字段进行告知

## HTTP 状态码 302、303 和 307 有什么区别

* 302 是 HTTP/1.0 中的临时重定向状态码，用 Location 响应头指定重定向的 URL，由客户端对这个 URL 发出重定向请求
* 303 与 307 是 HTTP/1.1 新增的状态码，也用于临时重定向
* 在 HTTP/1.0 规范中要求 302 不能改变重定向后的请求方法（如第一次请求为 POST，重定向后的请求也为 POST），但没有强制执行，还是会根据服务端的具体实现而改变
* 303 会强制将重定向后的请求改为 GET 方法
* 307 会强制重定向不能改变原来的请求方法

## HTTP 状态码 502 和 504 有什么区别

* 502 指上游网关有响应但无法解析
* 504 指上游网关响应超时
