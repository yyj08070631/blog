# 002 HTTP 请求方法

::: tip 部分参考来源
[HTTP协议漫谈 - HTTP协议请求方法](https://blog.csdn.net/ccpat/article/details/79463473)
[GET 和 POST 到底有什么区别？](https://www.zhihu.com/question/28586791)
:::

## 标准方法

**GET** 通常用于请求服务器发送某个资源

**HEAD** 与 GET 很相似，但在返回时只返回响应头，可以用于在不获取资源的情况下了解资源的情况

**PUT** 在 RESTful 风格的接口中，PUT 一般代表修改内容

**POST** 在 RESTful 风格的接口中，POST 一般代表新增内容

**TRACE** 一般用于发送一个诊断请求，验证请求是否穿过了完整的请求/响应链。一般可以用 [Via](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Via) 头部标识请求/响应的过程

**OPTIONS** 一般在发起跨域请求时出现，用于确认服务器允许的请求方法

**DELETE** 一般用于删除资源，它在

**CONNECT** 可以用来创建“隧道”，访问启用了 HTTPS 的站点

截止 HTTP/1.1 第三版（[RFC 7231](https://tools.ietf.org/html/rfc7231)），标准的请求方法只包括上述的 8 个。此外，如果HTTP服务端接收到一个已经实现，但不能被用于相应的资源的请求方法，需要返回错误码 **405 Method Not Allowed** 如果 HTTP 服务端接收到一个未知的方法，则需要返回错误码 **501 Not Implemented**

## 扩展方法

HTTP 被设计成字段可扩展的形式，以扩展一些新的特性，如在 RFC 2518 发布的 [WebDAV 扩展协议](https://zh.wikipedia.org/wiki/%E5%9F%BA%E4%BA%8EWeb%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%96%E5%86%99%E5%92%8C%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6)，就定义了 PROPFIND、PROPPATCH、MKCOL、COPY、MOVE、LOCK、UNLOCK 七个新方法，并对标准方法 DELETE、PUT、OPTIONS 做了一些修改。

## 请求方法的属性

在 RFC 2068 中，讨论了请求方法的两类属性，安全性和幂等性，在 RFC 7231 中，又增加了方法的可缓存性。

### 安全的方法（Safe Methods）

说到安全，一般都会想到保护数据不被窃取，保证系统不被攻击，但这里安全的含义并不是这样。一个安全的请求方法，指的是这个方法在语义上是只读的，它不会对服务器产生任何预期修改。这里对安全方法的定义特别强调了它是一个语义上的安全，区别于实现安全。

根据上述定义，GET、HEAD、OPTIONS 和 TRACE 方法被认为是安全的方法，其他方法则被认为是不安全的。

区分安全不安全的请求方法的主要目的在于，让网络爬虫和网页预加载程序能够安心工作，不用担心会造成什么危害。此外，它能够让浏览器在访问一些不被信任的页面时，对网页中执行的不安全的请求方法采取一定的策略来限制它们的活动。浏览器需要能够区分出不安全的请求，让用户能够在这些请求被提交之前，意识到可能存在的风险。

### 幂等的方法（Idempotent Methods）

在 [RFC 7231](https://tools.ietf.org/html/rfc7231#section-4.2.2) 中定义：使用该方法发送多次与单次请求，在服务器上的预期效果是相同的，则请求方法被视为“幂等”。在该规范定义的请求方法中，PUT、DELETE 和安全请求的四种方法都是幂等的。

区分幂等操作的意义在于，当客户端发送一条请求后，在获取服务器响应前出现连接错误导致无法确定本次请求是否成功时，可以安全的再次重复这次请求，而不用担心会产生什么副作用。

### 可缓存的方法（Cacheable Methods）

可缓存的请求方法指的是该方法对应的响应消息能够在客户端被存储，并在之后的请求中被直接使用，而不再需要从服务端重新获取。可缓存的方法有 GET、HEAD 和 POST，但大部分的实现中都只支持 GET 和 HEAD 的缓存。

### 标准请求方法的属性

根据上述定义，可以得到如下 HTTP 协议标准请求方法的分类表格。

![标准请求方法的属性](../image/00012.png)
> 图：标准请求方法的属性

## GET 和 POST 的区别

### 浏览器所发出的非 Ajax 请求

**功能**：GET 请求用于读取一个 html 页面 / 图片 / css / js 等资源，POST 请求则是出现在点击 &lt;form&gt; 表单中的 submit 按钮提交资源时发出。

**缓存**：由于 GET 的语义是读取资源，浏览器会对 GET 请求做缓存，而 POST 请求在语义上会对服务器资源作出修改，浏览器则不会进行缓存，否则如果一个 POST 命中了缓存，返回了操作成功，而服务器实际上又没有接收到请求，更没有对服务器资源作出应有的修改，这就犯了大错了。

**幂等性**：GET 请求在语义上是幂等的，POST 则不是。虽然请求方法在 HTTP 规范中只是语义上的区别，没有强制要求具体的实现，但浏览器对这两种请求是有一些区分的，比如浏览器的书签只能发起 GET 请求；在填写了 &lt;form&gt; 表单时刷新页面，浏览器会弹出一个确认的模态框，提示用户“返回此页可能需要重复已进行的所有操作，是否要继续刷新？”等等。

将 GET 实现为
